{"pageProps":{"newOneContent":{"title":"使用 clamp() 进行响应式设计","date":"2020-11-05T14:52:42.712Z","slug":"clamp-design","author":{"name":"Alfxjx","picture":"/assets/blog/authors/alfxjx.jpeg"},"type":"posts","content":"\n> * 原文地址：[clamp() for Responsive Design](https://calebhearth.com/clamp-for-responsive-design)\n> * 原文作者：[Caleb Hearth](https://calebhearth.com/)\n> * 译文出自：[掘金翻译计划](https://github.com/xitu/gold-miner)\n> * 本文永久链接：[https://github.com/xitu/gold-miner/blob/master/article/2020/clamp-for-responsive-design.md](https://github.com/xitu/gold-miner/blob/master/article/2020/clamp-for-responsive-design.md)\n> * 译者：[Alfxjx](https://github.com/Alfxjx)\n> * 校对者：[z0gSh1u](https://github.com/z0gSh1u)、[HurryOwen](https://github.com/HurryOwen)\n\n# 使用 clamp() 进行响应式设计\n\n新的 CSS 函数 `clamp()` 提供了一种通过给目标值设置最大最小值的范围来计算实际值方法。它的语法是 `clamp([min], [calculated], [max])`。当你基于屏幕尺寸，使用长度单位 `vw` 来缩放一些值时，这个函数很有用。\n\n该项技术很适用于跨多种屏幕尺寸的设计。常规的方法是根据屏幕的宽度使用媒体查询的方法来对样式做不同的调整，但是这么做导致我们在开发的时候要么以“移动端优先”为原则，开发小屏幕的应用，再按比例增加；要么是以“桌面端优先”为原则，开发适用于大屏幕的应用，再按比例缩小。通过使用 `clamp()` 函数，用一个已知的最大最小值来约束变化的范围，我们开发人员可以减少对于样式响应式断点的依赖，这样就无需为了一致性检查很多种不同的宽度了。\n \n![image](https://user-images.githubusercontent.com/5164225/95879008-7562ad00-0da8-11eb-9b5a-01dd31d575d8.png)\n运河闸可以使船通过不同水位的水域\n\n为了理解 `clamp()` 是如何工作的，我喜欢用运河闸的比喻。运河闸使用两个可以升高和降低的船闸，以使船只可以越过它们。一旦船在闸板之间，则从高水位侧添加水或将水排到低水位侧，以分别升高或降低闸板之间的水位。这使船可以随水位轻轻浮动并在最小和最大水位之间移动。\n\n更具体地说，`clamp(100%, calc(1em + 1vw), 200%)` 的效果与 `max(100%, min(calc(1em + 1vw), 200%))` 相同。最神奇的就是中间的这个参数 `calc(1em + 1vw)`，将浏览器的宽度（或者说，视口的宽度）代入了计算之中。`1vw` 相当于视口宽度的 1%，因此 1em 加上视口宽度的 1% 的计算结果会随着浏览器的大小调整而变动。\n\n让我们来看看我们是怎样通过此方法来调整字号大小的。下面的这个例子和我在我的个人网站上使用的方式非常相近：\n\n```css\nbody {\n  font-size: clamp(100%, calc(1rem + 2vw), 1.375rem);\n}\n```\n\n拆分下来看，`100%` 通常表示着“当前页面的基本尺寸”，对于字号而言就是 16px。`calc(1rem + 2vw)` 使用 `rem`（同样是 16px ）加上视口宽度的 2% 来进行计算。`1.375rem` 则是我理想情况下的最大字号，为 22px。\n\n`clamp()` 以及相关的 `min()` 和 `max()` 函数在本文写作之时都有了很好的浏览器支持：\n\n![来自 caniuse.com 的跨主要浏览器的 css-math-functions 功能支持数据](https://caniuse.bitsofco.de/image/css-math-functions.jpg) \n\n[在 MDN 中](https://developer.mozilla.org/en-US/docs/Web/CSS/clamp)，`clamp()` 适用于任何使用了数字、百分数以及其他长度单位的样式中。但奇怪的是，当我尝试将其应用到[ `line-height` ](https://blog.typekit.com/2016/08/17/flexible-typography-with-css-locks/)时，我发现 Safari 14 应该是支持 `line-height: clamp(...)` 这样的写法的（我尝试了 `@supports`），但是实际情况却是回退到了基准的 `line-height` ，非常令人费解。最终我使用 `line-height: min(calc(1.1em + 1vw), 32px)` 从而实现了 `line-height` 响应式地根据我的内容高度来确定。这里不需要设置一个最小值，因为我测试的宽度都不是很小，但是如果有最小值的需求的话，可以在最外层包裹一个 `max()`：`line-height: max(100%, min(calc(1.1em + 1vw), 32px))`。\n\n> 如果发现译文存在错误或其他需要改进的地方，欢迎到 [掘金翻译计划](https://github.com/xitu/gold-miner) 对译文进行修改并 PR，也可获得相应奖励积分。文章开头的 **本文永久链接** 即为本文在 GitHub 上的 MarkDown 链接。\n\n---\n\n> [掘金翻译计划](https://github.com/xitu/gold-miner) 是一个翻译优质互联网技术文章的社区，文章来源为 [掘金](https://juejin.im) 上的英文分享文章。内容覆盖 [Android](https://github.com/xitu/gold-miner#android)、[iOS](https://github.com/xitu/gold-miner#ios)、[前端](https://github.com/xitu/gold-miner#前端)、[后端](https://github.com/xitu/gold-miner#后端)、[区块链](https://github.com/xitu/gold-miner#区块链)、[产品](https://github.com/xitu/gold-miner#产品)、[设计](https://github.com/xitu/gold-miner#设计)、[人工智能](https://github.com/xitu/gold-miner#人工智能)等领域，想要查看更多优质译文请持续关注 [掘金翻译计划](https://github.com/xitu/gold-miner)、[官方微博](http://weibo.com/juejinfanyi)、[知乎专栏](https://zhuanlan.zhihu.com/juejinfanyi)。\n","coverImage":"/assets/blog/clamp.png"},"allPosts":[{"title":"使用 clamp() 进行响应式设计","date":"2020-11-05T14:52:42.712Z","slug":"clamp-design","author":{"name":"Alfxjx","picture":"/assets/blog/authors/alfxjx.jpeg"},"type":"posts","coverImage":"/assets/blog/clamp.png","excerpt":"新的 CSS 函数 `clamp()` 提供了一种通过给目标值设置最大最小值的范围来计算实际值方法。它的语法是 `clamp([min], [calculated], [max])`。当你基于屏幕尺寸，使用长度单位 `vw` 来缩放一些值时，这个函数很有用。"},{"title":"如何用正则表达式判断一个数是否是质数","date":"2020-10-08T12:44:58.817Z","slug":"judge-a-number","author":{"name":"Alfxjx","picture":"/assets/blog/authors/alfxjx.jpeg"},"type":"posts","excerpt":"本文展示了一种判断一个数是否是质数的奇技淫巧，采用的是正则表达式方法。"},{"title":"CSS 的 RGB 颜色覆盖","date":"2020-09-27T08:18:39.741Z","slug":"css-rgb-color","author":{"name":"Alfxjx","picture":"/assets/blog/authors/alfxjx.jpeg"},"type":"posts","coverImage":"/assets/blog/css-rgb.jpeg","excerpt":"浅薄的研究了一下，希望可以和我讨论"},{"title":"如何基于 D3.js 使用外部数据源创建图表","date":"2020-09-27T08:18:39.741Z","slug":"d3-charts","author":{"name":"Alfxjx","picture":"/assets/blog/authors/alfxjx.jpeg"},"type":"posts","coverImage":"/assets/blog/d3.png","excerpt":"D3 是一个运行于 web 端的 Javascript 可视化库。D3 的第一个版本发布于 2011 年，并且随着社区支持的增加而成熟。对于早期版本的 D3，学习曲线有些陡峭，但对于 JavaScript 初学者来说，最新版本学习起来更容易。大多数为 Web 构建的可视化都依赖于动态数据源 —— 因此，本文的目的是使您能够在 D3 中使用外部数据源创建图表。"},{"title":"[CSS]矩形进度条的两种实现","date":"2020-07-19T20:35:07.322Z","slug":"loading-in-css","author":{"name":"Alfxjx","picture":"/assets/blog/authors/alfxjx.jpeg"},"type":"posts","coverImage":"/assets/blog/css-loading.png","excerpt":"最近开发接到一个需求，前端展示付款的验证码，验证码时效 10 分钟，到期过期，同时在二维码的外侧有一个倒计时条，原本的实现方式是通过 JS 来控制，设置左上，左下，右上，右下四个矩形，每个矩形只显示一个折角的边框，从而模拟整个外框。"}]},"__N_SSG":true}