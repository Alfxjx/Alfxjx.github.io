<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/6ac04af9c34471e28ed7.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6ac04af9c34471e28ed7.css" data-n-g=""/><link rel="preload" href="/_next/static/css/8fa755d3830e88407993.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8fa755d3830e88407993.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d4ca226b082815b6b5f.js"></script><script src="/_next/static/chunks/webpack-61095c13c5984b221292.js" defer=""></script><script src="/_next/static/chunks/main-f388e32f9dd9c15fe4aa.js" defer=""></script><script src="/_next/static/chunks/pages/_app-195005c5a9d38cc7d564.js" defer=""></script><script src="/_next/static/chunks/852-2043476d938a0a39d6e5.js" defer=""></script><script src="/_next/static/chunks/pages/tech/%5Bslug%5D-99c5e5316fba0ea4d03b.js" defer=""></script><script src="/_next/static/ugKN70FP7jUwCGudR_p-J/_buildManifest.js" defer=""></script><script src="/_next/static/ugKN70FP7jUwCGudR_p-J/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="slug__Wrapper-sc-16v6d1-0 bLilqO"><div class="header"><div class="icon-wrapper"><div class="icons"><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8c-14.7 12.8-14.7 35.6 0 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"></path></svg></div><div class="icons"><a href="/tech"><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M541.141 268.864l61.718 16.939-132.395 482.474-61.717-16.938L541.14 268.864zm-212.138 29.803l44.885 45.61-175.36 172.587 175.04 167.573-44.267 46.23-222.634-213.163 222.336-218.837zm355.882 0l222.336 218.837-222.634 213.163-44.267-46.23 175.019-167.573L640 344.277l44.885-45.61z"></path></svg></a></div></div></div><div class="toggle"><button class="Button__InsideButton-sc-19071w6-0 cyRVLS"><div class="LightDarkSwitcher__Switcher-sc-hbms9j-0 cBdTSF"><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M448 64v195.2a224.832 224.832 0 0 0-100.992 42.24L208.512 163.2l-45.248 45.312 138.24 138.496A218.624 218.624 0 0 0 259.008 448H64v64h195.008c5.504 37.76 20.48 72 42.496 100.992l-138.24 138.496 45.248 45.248L347.008 658.24C376 680 410.496 695.232 448 700.736V896h64V700.8a222.4 222.4 0 0 0 100.992-42.56l138.496 138.496 45.248-45.248L658.24 612.992A216.32 216.32 0 0 0 700.992 512H896v-64H700.992a216.32 216.32 0 0 0-42.752-100.992l138.496-138.496-45.248-45.248-138.496 138.24A224.832 224.832 0 0 0 512 259.2V64zm32 256c88.768 0 160 71.232 160 160s-71.232 160-160 160a159.488 159.488 0 0 1-160-160c0-88.768 71.232-160 160-160z"></path></svg></div></button></div><div style="height:3.25rem"></div><div class="Post-sc-1u8x57o-0 slug__PostWrapper-sc-16v6d1-1 fbyABu eOoovR"><div class="info"><h1>[译] 使用 clamp() 进行响应式设计</h1><div class="user"><img class="img" src="/assets/authors/alfxjx.jpg" alt="Alfxjx"/><span class="title">Alfxjx</span><div class="date">2020-11-05</div></div></div><div class="post"><blockquote>
<ul>
<li>原文地址：<a href="https://calebhearth.com/clamp-for-responsive-design">clamp() for Responsive Design</a></li>
<li>原文作者：<a href="https://calebhearth.com/">Caleb Hearth</a></li>
<li>译文出自：<a href="https://github.com/xitu/gold-miner">掘金翻译计划</a></li>
<li>本文永久链接：<a href="https://github.com/xitu/gold-miner/blob/master/article/2020/clamp-for-responsive-design.md">https://github.com/xitu/gold-miner/blob/master/article/2020/clamp-for-responsive-design.md</a></li>
<li>译者：<a href="https://github.com/Alfxjx">Alfxjx</a></li>
<li>校对者：<a href="https://github.com/z0gSh1u">z0gSh1u</a>、<a href="https://github.com/HurryOwen">HurryOwen</a></li>
</ul>
</blockquote>
<p>新的 CSS 函数 <code>clamp()</code> 提供了一种通过给目标值设置最大最小值的范围来计算实际值方法。它的语法是 <code>clamp([min], [calculated], [max])</code>。当你基于屏幕尺寸，使用长度单位 <code>vw</code> 来缩放一些值时，这个函数很有用。</p>
<p>该项技术很适用于跨多种屏幕尺寸的设计。常规的方法是根据屏幕的宽度使用媒体查询的方法来对样式做不同的调整，但是这么做导致我们在开发的时候要么以“移动端优先”为原则，开发小屏幕的应用，再按比例增加；要么是以“桌面端优先”为原则，开发适用于大屏幕的应用，再按比例缩小。通过使用 <code>clamp()</code> 函数，用一个已知的最大最小值来约束变化的范围，我们开发人员可以减少对于样式响应式断点的依赖，这样就无需为了一致性检查很多种不同的宽度了。</p>
<p><img src="/assets/blog/clamp.png" alt="运河闸可以使船通过不同水位的水域"></p>
<p>为了理解 <code>clamp()</code> 是如何工作的，我喜欢用运河闸的比喻。运河闸使用两个可以升高和降低的船闸，以使船只可以越过它们。一旦船在闸板之间，则从高水位侧添加水或将水排到低水位侧，以分别升高或降低闸板之间的水位。这使船可以随水位轻轻浮动并在最小和最大水位之间移动。</p>
<p>更具体地说，<code>clamp(100%, calc(1em + 1vw), 200%)</code> 的效果与 <code>max(100%, min(calc(1em + 1vw), 200%))</code> 相同。最神奇的就是中间的这个参数 <code>calc(1em + 1vw)</code>，将浏览器的宽度（或者说，视口的宽度）代入了计算之中。<code>1vw</code> 相当于视口宽度的 1%，因此 1em 加上视口宽度的 1% 的计算结果会随着浏览器的大小调整而变动。</p>
<p>让我们来看看我们是怎样通过此方法来调整字号大小的。下面的这个例子和我在我的个人网站上使用的方式非常相近：</p>
<pre><code class="language-css">body {
  font-size: clamp(100%, calc(1rem + 2vw), 1.375rem);
}
</code></pre>
<p>拆分下来看，<code>100%</code> 通常表示着“当前页面的基本尺寸”，对于字号而言就是 16px。<code>calc(1rem + 2vw)</code> 使用 <code>rem</code>（同样是 16px ）加上视口宽度的 2% 来进行计算。<code>1.375rem</code> 则是我理想情况下的最大字号，为 22px。</p>
<p><code>clamp()</code> 以及相关的 <code>min()</code> 和 <code>max()</code> 函数在本文写作之时都有了很好的浏览器支持：</p>
<p><img src="/assets/blog/css-math-functions.jpg" alt="来自 caniuse.com 的跨主要浏览器的 css-math-functions 功能支持数据"></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/clamp">在 MDN 中</a>，<code>clamp()</code> 适用于任何使用了数字、百分数以及其他长度单位的样式中。但奇怪的是，当我尝试将其应用到<a href="https://blog.typekit.com/2016/08/17/flexible-typography-with-css-locks/"> <code>line-height</code> </a>时，我发现 Safari 14 应该是支持 <code>line-height: clamp(...)</code> 这样的写法的（我尝试了 <code>@supports</code>），但是实际情况却是回退到了基准的 <code>line-height</code> ，非常令人费解。最终我使用 <code>line-height: min(calc(1.1em + 1vw), 32px)</code> 从而实现了 <code>line-height</code> 响应式地根据我的内容高度来确定。这里不需要设置一个最小值，因为我测试的宽度都不是很小，但是如果有最小值的需求的话，可以在最外层包裹一个 <code>max()</code>：<code>line-height: max(100%, min(calc(1.1em + 1vw), 32px))</code>。</p>
<blockquote>
<p>如果发现译文存在错误或其他需要改进的地方，欢迎到 <a href="https://github.com/xitu/gold-miner">掘金翻译计划</a> 对译文进行修改并 PR，也可获得相应奖励积分。文章开头的 <strong>本文永久链接</strong> 即为本文在 GitHub 上的 MarkDown 链接。</p>
</blockquote>
<hr>
<blockquote>
<p><a href="https://github.com/xitu/gold-miner">掘金翻译计划</a> 是一个翻译优质互联网技术文章的社区，文章来源为 <a href="https://juejin.im">掘金</a> 上的英文分享文章。内容覆盖 <a href="https://github.com/xitu/gold-miner#android">Android</a>、<a href="https://github.com/xitu/gold-miner#ios">iOS</a>、<a href="https://github.com/xitu/gold-miner#%E5%89%8D%E7%AB%AF">前端</a>、<a href="https://github.com/xitu/gold-miner#%E5%90%8E%E7%AB%AF">后端</a>、<a href="https://github.com/xitu/gold-miner#%E5%8C%BA%E5%9D%97%E9%93%BE">区块链</a>、<a href="https://github.com/xitu/gold-miner#%E4%BA%A7%E5%93%81">产品</a>、<a href="https://github.com/xitu/gold-miner#%E8%AE%BE%E8%AE%A1">设计</a>、<a href="https://github.com/xitu/gold-miner#%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD">人工智能</a>等领域，想要查看更多优质译文请持续关注 <a href="https://github.com/xitu/gold-miner">掘金翻译计划</a>、<a href="http://weibo.com/juejinfanyi">官方微博</a>、<a href="https://zhuanlan.zhihu.com/juejinfanyi">知乎专栏</a>。</p>
</blockquote>
</div><div id="comments"></div></div><div class="Footer__FooterWrapper-sc-1ysspqt-0 dduiPc"><div class="my-main-font text"><span>Powerd by Next.js on gh-pages, </span><a href="http://www.anbandon.work">More in old blog</a></div><div class="Footer__IconList-sc-1ysspqt-1 iXsBAW"><a href="https://github.com/alfxjx"><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="32" height="32"><defs><style></style></defs><path d="M960 512c0 97.76-28.704 185.216-85.664 263.264-56.96 78.016-130.496 131.84-220.64 161.856-10.304 1.824-18.368.448-22.848-4.032a22.4 22.4 0 0 1-7.2-17.504v-122.88c0-37.632-10.304-65.44-30.464-82.912a409.856 409.856 0 0 0 59.616-10.368 222.752 222.752 0 0 0 54.72-22.816c18.848-10.784 34.528-23.36 47.104-38.592 12.544-15.232 22.848-35.904 30.912-61.44 8.096-25.568 12.128-54.688 12.128-87.904 0-47.072-15.232-86.976-46.208-120.16 14.368-35.456 13.024-74.912-4.48-118.848-10.752-3.616-26.432-1.344-47.072 6.272s-38.56 16.16-53.824 25.568l-21.984 13.888C587.776 285.088 550.56 280.16 512 280.16s-75.776 4.928-112.096 15.232a444.48 444.48 0 0 0-24.672-15.68c-10.336-6.272-26.464-13.888-48.896-22.432-21.952-8.96-39.008-11.232-50.24-8.064-17.024 43.936-18.368 83.424-4.032 118.848-30.496 33.632-46.176 73.536-46.176 120.608 0 33.216 4.032 62.336 12.128 87.456 8.032 25.12 18.368 45.76 30.496 61.44 12.544 15.68 28.224 28.704 47.072 39.04 18.848 10.304 37.216 17.92 54.72 22.816a409.6 409.6 0 0 0 59.648 10.368c-15.712 13.856-25.12 34.048-28.704 60.064a99.744 99.744 0 0 1-26.464 8.512 178.208 178.208 0 0 1-33.184 2.688c-13.024 0-25.568-4.032-38.144-12.544-12.544-8.512-23.296-20.64-32.256-36.32a97.472 97.472 0 0 0-28.256-30.496c-11.232-8.064-21.088-12.576-28.704-13.92l-11.648-1.792c-8.096 0-13.92.928-17.056 2.688-3.136 1.792-4.032 4.032-2.688 6.72s3.136 5.408 5.376 8.096 4.928 4.928 7.616 7.168l4.032 2.688c8.544 4.032 17.056 11.232 25.568 21.984 8.544 10.752 14.368 20.64 18.4 29.6l5.824 13.44c4.928 14.816 13.44 26.912 25.568 35.872 12.096 8.992 25.088 14.816 39.008 17.504 13.888 2.688 27.36 4.032 40.352 4.032s23.776-.448 32.288-2.24l13.472-2.24c0 14.784 0 32.288.416 52.032 0 19.744.48 30.496.48 31.392a22.624 22.624 0 0 1-7.648 17.472c-4.928 4.48-12.992 5.824-23.296 4.032-90.144-30.048-163.68-83.84-220.64-161.888C92.256 697.216 64 609.312 64 512c0-81.152 20.192-156.064 60.096-224.672s94.176-122.88 163.232-163.232C355.936 84.192 430.816 64 512 64s156.064 20.192 224.672 60.096 122.88 94.176 163.232 163.232C939.808 355.488 960 430.848 960 512"></path></svg></a><a href="https://weibo.com/u/1950371745"><svg class="icon" viewBox="0 0 1026 1024" xmlns="http://www.w3.org/2000/svg" width="32.063" height="32"><defs><style></style></defs><path d="M0 61.5zM780 577c-11-2-18-5.5-21-9.5-3-4.5-4-8-1.5-12l3-5.5c.5-.5 1.5-2 2-3 .5-1.5 2-4.5 4.5-9 2-4.5 4-9.5 5-14s2-10.5 2.5-17 .5-13.5-.5-19.5-3-12.5-6.5-20c-3.5-7-7.5-13.5-13.5-19.5-10-10-23-16.5-39.5-19.5-16-3-32.5-3-48.5-.5s-31.5 5.5-45.5 9.5c-14.5 4-26 7.5-35.5 11.5l-14 6.5c-7 2-13 3.5-18 4.5-4.5.5-8.5.5-11-.5s-4.5-2-6-3-2-3.5-1.5-7.5.5-7.5 1-10c.5-3 1.5-7.5 2.5-13.5 1.5-6 2.5-11 3-14.5 0-8.5-.5-16.5-1.5-24s-3.5-16-7-25.5-9-17-15.5-22.5c-7-5.5-15.5-10.5-26-14s-24-4.5-40.5-3-35 5.5-56 13c-25 8.5-50.5 21.5-76.5 38-26 17-48 34.5-67 52.5-19 18.5-36.5 36-52 53.5-16 17-28 31-36.5 42l-12 17c-23.5 31-41 61.5-52.5 92.5s-17 54-16 70V723c4.5 34.5 15 65.5 31.5 92.5 17 27.5 37 49.5 60 66 23.5 17 51 31 82.5 43s62 20.5 91 26 59.5 9 92 11.5c53 4.5 108 0 165-12.5s110-34.5 159-65c49-31 84-68 104-111 12-25 18.5-49 19-71s-3.5-40.5-11.5-54.5-18-26.5-30.5-37c-12.5-11-24.5-18.5-35.5-23.5-10-6-20-9.5-28.5-10.5zM452 911.5c-77.5 3.5-143.5-11.5-197.5-45s-81-76.5-81-128c0-51 27-95 80.5-132s120-57 198-61S596 555 650 584s80.5 69.5 80.5 120.5c0 51.5-27.5 98-82.5 139.5s-120 64-196 67.5zm-31.5-298c-21 2-39.5 7-56 14.5S335 644 326 654c-9.5 9.5-17 20-23.5 31s-11 22-13.5 33-4 20.5-5 29.5c-.5 9-1 16-1 21l1 8.5v4.5c0 2 .5 6.5 2 13s3.5 12.5 6 18 6.5 11.5 12.5 18 12.5 12 20.5 16c47.5 23 91.5 30 132.5 21s74-29.5 99-62c10-12 16.5-27.5 20-45 3-18 2.5-36-2-54.5s-12.5-35-24-50-28.5-26.5-51-35c-23.5-9-49.5-11-79-7.5zM382 817c-4.5.5-8.5 1-12.5.5s-7.5-1-11-2-6.5-2.5-9.5-4-6-3.5-8-6l-6-7.5c-2-2.5-3-5.5-4.5-8.5s-1.5-6.5-1.5-10c0-8 2-15.5 6.5-23s10-14 18-19.5c7.5-5.5 16-8.5 25.5-9 6.5-.5 12.5-.5 19 .5 6 1 11.5 3 15.5 5.5 4.5 2.5 8 5.5 11.5 8.5 3 3 5.5 7 7 11.5s2 9 2 14c0 8-2.5 15.5-7 22.5S416 804 408 809c-8 4-16.5 7-26 8zm91.5-77.5c-5 3.5-10 5-15.5 5-5.5-.5-9-2.5-11.5-7l-2-4.5c-.5-1.5-1-3-1-4.5V724c0-2 .5-4 1-5.5l2-4.5c.5-1.5 2-2.5 3-3l3-4.5c5.5-4.5 11.5-6 16.5-5.5s9 3.5 11.5 8.5c2 3 3 6 2.5 9.5s-1.5 7-3 10c-1.5 4.5-4 7.5-6.5 10.5zm382-225c4.5 0 8.5-1 12-3s6.5-5 8.5-8 3.5-6.5 4.5-10c.5-.5 1-2 1-3 8.5-82-20-128.5-86-140-19.5-3.5-37.5-4-54-1-5 0-9.5 1.5-13 4s-6.5 5.5-9 9.5-4 8-4 12.5c0 7 2.5 13.5 7.5 18.5s11 7.5 18.5 7.5c56-13 86 5 90.5 54 1.5 12 .5 23.5-2 34.5 0 7 2.5 13.5 7.5 18.5 4.5 3.5 10.5 6 18 6zM837 211c-31.5-7-74-5.5-127 4.5-.5 0-1.5.5-2 1l-1 2-1 1c-8 2-14.5 6.5-19.5 13.5s-7.5 14-7.5 22c0 11 3.5 19.5 11 27 7 7 16 11 26 11h3c.5 0 2.5-.5 5-1s5-1.5 8-1.5c3-.5 6-1 9-2s6-2 8.5-3S757 284 764 284s16 .5 26.5 1.5 22 4 34.5 8c12.5 4.5 25 9.5 37.5 16s25 15.5 37.5 27 23.5 24.5 33 40c18.5 42.5 22.5 83 11 122.5 0 .5 0 1.5-.5 2s-1 2.5-1.5 5.5-1.5 5.5-2 8-1.5 5.5-2 9.5-1 7.5-1 10c0 6.5 2 12 5.5 16 3.5 4.5 8 7.5 13.5 9 5.5 2 11.5 2.5 19 2.5 20 0 32-12 35.5-36.5 8.5-28 13.5-54.5 14.5-80s-.5-48-5.5-67c-4.5-19.5-11.5-37.5-21-54.5s-20-31-32.5-43c-12-12-26-22.5-41-32.5-15-9.5-29.5-17.5-43.5-23-15-5.5-29.5-10.5-44.5-14z"></path></svg></a><a href="https://juejin.cn/user/2330620383728551"><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><defs><style></style></defs><path d="M832 739.533h57.958v30.105H587.571v-30.105h48.538l-31.54-184.525-.819-4.506 4.608-.716 21.095-3.482 4.505-.717.82 4.506 32.46 189.645h49.87V510.874H571.391v-30.106h145.613V381.44H619.93v-30.106h228.556v30.106H747.52v99.328h162.918v30.106H747.622v228.659h53.453l32.461-189.543.717-4.505 4.505.717 21.095 3.481 4.608.717-.82 4.506L832 739.533zm-428.032-9.728V582.45h74.854V423.22h-30.617v129.127h-44.237V413.798H373.35v138.548h-43.52V423.219h-30.617v159.232h74.137v147.354h-43.52V602.624h-30.617V759.91H478.72V602.624h-30.618v127.18h-44.134zM148.89 582.45l-21.607 21.197-3.174 3.174-3.175-3.174L105.78 588.8l-3.379-3.277 3.38-3.277 43.11-42.393V364.237h-37.684V334.13h37.684V254.26h30.617v79.872h44.135v30.106h-44.135v145.715l25.6-25.088 3.175-3.174 3.174 3.174 15.155 14.746 3.38 3.276-3.38 3.277-47.104 46.285v65.024c0 33.178-5.12 65.024-13.824 94.413-5.325 18.022-10.547 31.13-14.745 39.629l-4.71 9.42-2.049 3.994-4.096-1.946-19.251-9.113-4.198-2.048 2.048-4.199 4.608-9.42c.716-1.332 2.252-4.813 3.993-9.319 2.97-7.475 5.94-15.974 8.704-25.497 7.885-26.932 12.698-56.013 12.698-86.016V582.45zm97.792 180.122l.921-4.506 2.15-10.24c12.8-61.645 17.511-195.584 16.999-358.605h220.672v-134.86H234.496l.102 4.71.205 10.65c.205 10.24.615 32.768.82 59.904.409 44.748.511 91.033.102 136.601-1.229 129.536-6.144 227.84-16.077 275.559l-2.15 10.24-.922 4.505 4.506.922 20.992 4.198 4.608.922zm19.865-403.456l-1.024-74.65h191.181v74.65H266.547zm634.266 31.437l3.072-3.277 14.54-15.36 3.175-3.38-3.482-3.174-121.344-109.875-3.072-1.229h-126.77l-3.073 1.229-121.241 109.875-3.482 3.175 3.174 3.379 14.541 15.36 3.072 3.277 3.38-2.97 115.2-103.014h103.833l115.2 103.014 3.277 2.97z"></path></svg></a></div></div></div><div class="Toast__StyledContainer-sc-1p228qg-0 iqCFQa"><div class="Toastify"></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"[译] 使用 clamp() 进行响应式设计","date":"2020-11-05T14:52:42.712Z","slug":"clamp-design","author":{"name":"Alfxjx","picture":"/assets/authors/alfxjx.jpg"},"content":"\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003e原文地址：\u003ca href=\"https://calebhearth.com/clamp-for-responsive-design\"\u003eclamp() for Responsive Design\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e原文作者：\u003ca href=\"https://calebhearth.com/\"\u003eCaleb Hearth\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e译文出自：\u003ca href=\"https://github.com/xitu/gold-miner\"\u003e掘金翻译计划\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e本文永久链接：\u003ca href=\"https://github.com/xitu/gold-miner/blob/master/article/2020/clamp-for-responsive-design.md\"\u003ehttps://github.com/xitu/gold-miner/blob/master/article/2020/clamp-for-responsive-design.md\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e译者：\u003ca href=\"https://github.com/Alfxjx\"\u003eAlfxjx\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e校对者：\u003ca href=\"https://github.com/z0gSh1u\"\u003ez0gSh1u\u003c/a\u003e、\u003ca href=\"https://github.com/HurryOwen\"\u003eHurryOwen\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e新的 CSS 函数 \u003ccode\u003eclamp()\u003c/code\u003e 提供了一种通过给目标值设置最大最小值的范围来计算实际值方法。它的语法是 \u003ccode\u003eclamp([min], [calculated], [max])\u003c/code\u003e。当你基于屏幕尺寸，使用长度单位 \u003ccode\u003evw\u003c/code\u003e 来缩放一些值时，这个函数很有用。\u003c/p\u003e\n\u003cp\u003e该项技术很适用于跨多种屏幕尺寸的设计。常规的方法是根据屏幕的宽度使用媒体查询的方法来对样式做不同的调整，但是这么做导致我们在开发的时候要么以“移动端优先”为原则，开发小屏幕的应用，再按比例增加；要么是以“桌面端优先”为原则，开发适用于大屏幕的应用，再按比例缩小。通过使用 \u003ccode\u003eclamp()\u003c/code\u003e 函数，用一个已知的最大最小值来约束变化的范围，我们开发人员可以减少对于样式响应式断点的依赖，这样就无需为了一致性检查很多种不同的宽度了。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/blog/clamp.png\" alt=\"运河闸可以使船通过不同水位的水域\"\u003e\u003c/p\u003e\n\u003cp\u003e为了理解 \u003ccode\u003eclamp()\u003c/code\u003e 是如何工作的，我喜欢用运河闸的比喻。运河闸使用两个可以升高和降低的船闸，以使船只可以越过它们。一旦船在闸板之间，则从高水位侧添加水或将水排到低水位侧，以分别升高或降低闸板之间的水位。这使船可以随水位轻轻浮动并在最小和最大水位之间移动。\u003c/p\u003e\n\u003cp\u003e更具体地说，\u003ccode\u003eclamp(100%, calc(1em + 1vw), 200%)\u003c/code\u003e 的效果与 \u003ccode\u003emax(100%, min(calc(1em + 1vw), 200%))\u003c/code\u003e 相同。最神奇的就是中间的这个参数 \u003ccode\u003ecalc(1em + 1vw)\u003c/code\u003e，将浏览器的宽度（或者说，视口的宽度）代入了计算之中。\u003ccode\u003e1vw\u003c/code\u003e 相当于视口宽度的 1%，因此 1em 加上视口宽度的 1% 的计算结果会随着浏览器的大小调整而变动。\u003c/p\u003e\n\u003cp\u003e让我们来看看我们是怎样通过此方法来调整字号大小的。下面的这个例子和我在我的个人网站上使用的方式非常相近：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-css\"\u003ebody {\n  font-size: clamp(100%, calc(1rem + 2vw), 1.375rem);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e拆分下来看，\u003ccode\u003e100%\u003c/code\u003e 通常表示着“当前页面的基本尺寸”，对于字号而言就是 16px。\u003ccode\u003ecalc(1rem + 2vw)\u003c/code\u003e 使用 \u003ccode\u003erem\u003c/code\u003e（同样是 16px ）加上视口宽度的 2% 来进行计算。\u003ccode\u003e1.375rem\u003c/code\u003e 则是我理想情况下的最大字号，为 22px。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eclamp()\u003c/code\u003e 以及相关的 \u003ccode\u003emin()\u003c/code\u003e 和 \u003ccode\u003emax()\u003c/code\u003e 函数在本文写作之时都有了很好的浏览器支持：\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/blog/css-math-functions.jpg\" alt=\"来自 caniuse.com 的跨主要浏览器的 css-math-functions 功能支持数据\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/clamp\"\u003e在 MDN 中\u003c/a\u003e，\u003ccode\u003eclamp()\u003c/code\u003e 适用于任何使用了数字、百分数以及其他长度单位的样式中。但奇怪的是，当我尝试将其应用到\u003ca href=\"https://blog.typekit.com/2016/08/17/flexible-typography-with-css-locks/\"\u003e \u003ccode\u003eline-height\u003c/code\u003e \u003c/a\u003e时，我发现 Safari 14 应该是支持 \u003ccode\u003eline-height: clamp(...)\u003c/code\u003e 这样的写法的（我尝试了 \u003ccode\u003e@supports\u003c/code\u003e），但是实际情况却是回退到了基准的 \u003ccode\u003eline-height\u003c/code\u003e ，非常令人费解。最终我使用 \u003ccode\u003eline-height: min(calc(1.1em + 1vw), 32px)\u003c/code\u003e 从而实现了 \u003ccode\u003eline-height\u003c/code\u003e 响应式地根据我的内容高度来确定。这里不需要设置一个最小值，因为我测试的宽度都不是很小，但是如果有最小值的需求的话，可以在最外层包裹一个 \u003ccode\u003emax()\u003c/code\u003e：\u003ccode\u003eline-height: max(100%, min(calc(1.1em + 1vw), 32px))\u003c/code\u003e。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e如果发现译文存在错误或其他需要改进的地方，欢迎到 \u003ca href=\"https://github.com/xitu/gold-miner\"\u003e掘金翻译计划\u003c/a\u003e 对译文进行修改并 PR，也可获得相应奖励积分。文章开头的 \u003cstrong\u003e本文永久链接\u003c/strong\u003e 即为本文在 GitHub 上的 MarkDown 链接。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003chr\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/xitu/gold-miner\"\u003e掘金翻译计划\u003c/a\u003e 是一个翻译优质互联网技术文章的社区，文章来源为 \u003ca href=\"https://juejin.im\"\u003e掘金\u003c/a\u003e 上的英文分享文章。内容覆盖 \u003ca href=\"https://github.com/xitu/gold-miner#android\"\u003eAndroid\u003c/a\u003e、\u003ca href=\"https://github.com/xitu/gold-miner#ios\"\u003eiOS\u003c/a\u003e、\u003ca href=\"https://github.com/xitu/gold-miner#%E5%89%8D%E7%AB%AF\"\u003e前端\u003c/a\u003e、\u003ca href=\"https://github.com/xitu/gold-miner#%E5%90%8E%E7%AB%AF\"\u003e后端\u003c/a\u003e、\u003ca href=\"https://github.com/xitu/gold-miner#%E5%8C%BA%E5%9D%97%E9%93%BE\"\u003e区块链\u003c/a\u003e、\u003ca href=\"https://github.com/xitu/gold-miner#%E4%BA%A7%E5%93%81\"\u003e产品\u003c/a\u003e、\u003ca href=\"https://github.com/xitu/gold-miner#%E8%AE%BE%E8%AE%A1\"\u003e设计\u003c/a\u003e、\u003ca href=\"https://github.com/xitu/gold-miner#%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD\"\u003e人工智能\u003c/a\u003e等领域，想要查看更多优质译文请持续关注 \u003ca href=\"https://github.com/xitu/gold-miner\"\u003e掘金翻译计划\u003c/a\u003e、\u003ca href=\"http://weibo.com/juejinfanyi\"\u003e官方微博\u003c/a\u003e、\u003ca href=\"https://zhuanlan.zhihu.com/juejinfanyi\"\u003e知乎专栏\u003c/a\u003e。\u003c/p\u003e\n\u003c/blockquote\u003e\n","coverImage":"/assets/blog/css-math-functions.jpg"}},"__N_SSG":true},"page":"/tech/[slug]","query":{"slug":"clamp-design"},"buildId":"ugKN70FP7jUwCGudR_p-J","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>